composer require guzzlehttp/guzzle
composer require guzzlehttp/guzzle
use Illuminate\Support\Facades\Http;

$response = Http::withHeaders([
    'x-api-key' => 'YOUR_API_KEY', // Reemplaza con tu clave de API de NOWPayments
])->post('https://api.nowpayments.io/v1/invoice', [
    'price_amount' => 100, // Monto en la moneda de destino
    'price_currency' => 'usd', // Moneda de destino
    'pay_currency' => 'btc', // Criptomoneda con la que se realizará el pago
    'order_id' => '12345', // ID de la orden (puede ser cualquier identificador de tu sistema)
    'order_description' => 'Descripción del producto o servicio',
    'success_url' => 'https://tusitio.com/pago-exitoso',
    'cancel_url' => 'https://tusitio.com/pago-cancelado',
]);

$data = $response->json(); // Respuesta JSON con la URL para realizar el pago

// Utilizar la URL para redirigir al usuario al portal de pago
$paymentUrl = $data['payment_url']; // Redirigir a esta URL para completar el pago
